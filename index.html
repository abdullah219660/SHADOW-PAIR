<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>SHADOWxMD PAIRING</title>
  <link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@400;700&family=Space+Mono:wght@400;700&display=swap" rel="stylesheet">
  <style>
    :root{
      --neon-cyan: #00f2fe;
      --neon-blue: #4facfe;
      --neon-mag:  #ff5bdc;
      --glass: rgba(10,14,20,0.45);
      --panel: rgba(255,255,255,0.03);
      --text: #e8fbff;
    }
    *{box-sizing:border-box; margin:0; padding:0}
    html,body{height:100%}
    body{
      font-family: 'Montserrat', system-ui, -apple-system, sans-serif;
      background: #05060a;
      color:var(--text);
      overflow:hidden;
      display:flex;
      align-items:center;
      justify-content:center;
      padding:22px;
    }

    /* Canvas sits behind UI */
    #bgCanvas{
      position:fixed; inset:0; z-index:0; display:block;
      background: linear-gradient(180deg,#03040a 0%, #071026 60%);
    }

    /* subtle overlay grid */
    .grid-overlay{
      position:fixed; inset:0; z-index:1; pointer-events:none;
      background-image:
        linear-gradient(90deg, rgba(255,255,255,0.012) 1px, transparent 1px),
        linear-gradient(0deg, rgba(255,255,255,0.012) 1px, transparent 1px);
      background-size: 120px 120px, 120px 120px;
      mix-blend-mode: overlay;
      opacity:0.7;
      transform:translateZ(0);
    }

    /* Main glass card */
    .card{
      position:relative; z-index:5;
      width:min(680px,96%);
      border-radius:14px;
      padding:26px;
      background: linear-gradient(180deg, rgba(10,14,20,0.72), rgba(8,10,14,0.55));
      border:1px solid rgba(255,255,255,0.05);
      box-shadow: 0 20px 60px rgba(2,6,18,0.6), inset 0 1px 0 rgba(255,255,255,0.02);
      backdrop-filter: blur(8px) saturate(1.1);
      text-align:center;
      overflow:hidden;
    }

    /* header */
    .brand{
      display:flex; gap:12px; align-items:center; justify-content:center;
      margin-bottom:8px;
    }
    .robot{
      font-size:40px; line-height:1;
      animation: jiggle 2s infinite ease-in-out;
      filter: drop-shadow(0 6px 18px rgba(0,200,255,0.15));
    }
    @keyframes jiggle{
      0%,100%{ transform: translateY(0) rotate(0) }
      50%{ transform: translateY(-6px) rotate(-6deg) }
    }
    h1{
      font-size:clamp(20px,3.6vw,30px);
      font-weight:700;
      letter-spacing:0.6px;
      color:transparent;
      background: linear-gradient(90deg, var(--neon-cyan), var(--neon-blue), var(--neon-mag));
      -webkit-background-clip: text; background-clip:text;
      text-shadow: 0 0 18px rgba(0,242,254,0.06);
    }
    .sub{
      font-family: 'Space Mono', monospace;
      color: rgba(235,250,255,0.8);
      margin-top:6px;
      font-size:12px;
      opacity:0.9;
    }

    /* input area */
    .stack{ margin-top:18px; display:grid; gap:12px; align-items:center; justify-items:center; }
    .field{
      width:100%; max-width:520px; display:flex; gap:8px;
    }
    input[type="text"]{
      flex:1;
      padding:12px 14px;
      border-radius:10px;
      border:1px solid rgba(255,255,255,0.06);
      background: linear-gradient(180deg, rgba(255,255,255,0.02), rgba(0,0,0,0.14));
      color:var(--text);
      font-size:15px;
      font-family:inherit;
      box-shadow: 0 6px 30px rgba(4,12,28,0.45), inset 0 1px 0 rgba(255,255,255,0.02);
      transition: box-shadow .18s ease, border-color .18s;
    }
    input[type="text"]:focus{ box-shadow: 0 10px 40px rgba(0,160,255,0.12); border-color: rgba(0,242,254,0.6) }

    button{
      padding:12px 16px;
      border-radius:10px;
      border:none;
      cursor:pointer;
      font-weight:700;
      text-transform:uppercase;
      letter-spacing:.6px;
      background: linear-gradient(90deg, rgba(0,242,254,0.12), rgba(79,172,254,0.12));
      color:#dffaff;
      min-width:140px;
      box-shadow: 0 8px 30px rgba(79,172,254,0.06);
      transition: transform .14s ease, box-shadow .14s ease;
    }
    button:hover{ transform: translateY(-3px); box-shadow: 0 18px 60px rgba(79,172,254,0.12) }

    .output{
      margin-top:12px;
      width:100%; max-width:520px;
      padding:12px 14px; border-radius:10px;
      background: rgba(0,0,0,0.45);
      border:1px solid rgba(255,255,255,0.03);
      font-family:'Space Mono', monospace;
      color: #bff7ff;
      font-size:13px;
      display:none;
      box-shadow: 0 8px 30px rgba(0,0,0,0.45), 0 0 40px rgba(0,242,254,0.04);
    }

    /* little footer badges */
    .meta{ margin-top:14px; display:flex; gap:10px; justify-content:center; font-size:12px; opacity:0.85 }
    .chip{
      padding:6px 10px; border-radius:999px;
      background: rgba(255,255,255,0.02);
      border:1px solid rgba(255,255,255,0.03);
      font-family:'Space Mono';
      letter-spacing:0.6px;
    }

    /* responsive */
    @media (max-width:520px){
      .brand{ gap:8px }
      .robot{ font-size:34px }
    }

  </style>
</head>
<body>
  <!-- Animated canvas background -->
  <canvas id="bgCanvas" aria-hidden="true"></canvas>
  <div class="grid-overlay" aria-hidden="true"></div>

  <article class="card" role="region" aria-label="AURA Connect panel">
    <div class="brand">
      <div class="robot" aria-hidden="true">ðŸ¤–</div>
      <div>
        <h1>SHADOWxMD PAIRING</h1>
        <div class="sub">Secure Pairing | Realtime Access</div>
      </div>
    </div>

    <div class="stack" role="form" aria-label="Pairing form">
      <div class="field">
        <input id="number" type="text" inputmode="numeric" pattern="[0-9]*" placeholder="Enter number (e.g. 923001234567)" aria-label="WhatsApp number">
        <button id="goBtn" type="button">Generate</button>
      </div>

      <div id="result" class="output" role="status" aria-live="polite"></div>

      <div class="meta" aria-hidden="true">
        <div class="chip">Mode: Secure</div>
        <div class="chip">v2025.00</div>
      </div>
    </div>
  </article>

  <script>
    /* =======================
       Canvas "hacking / tech" animation
       - glowing nodes, connecting lines, vertical scan
       ======================= */
    const canvas = document.getElementById('bgCanvas');
    const ctx = canvas.getContext('2d');
    let W, H, nodes = [];

    function resize(){
      W = canvas.width = innerWidth;
      H = canvas.height = innerHeight;
      // generate nodes count relative to width
      const count = Math.max(18, Math.floor(W / 80));
      nodes = [];
      for(let i=0;i<count;i++){
        nodes.push({
          x: Math.random() * W,
          y: Math.random() * H,
          vx: (Math.random()-0.5) * 0.4,
          vy: (Math.random()-0.5) * 0.4,
          r: 1 + Math.random()*2,
          glow: 0.2 + Math.random()*0.8
        });
      }
    }
    window.addEventListener('resize', resize);
    resize();

    // vertical scanner
    let scanX = 0;
    function draw(){
      ctx.clearRect(0,0,W,H);

      // subtle vignette
      const g = ctx.createLinearGradient(0,0,0,H);
      g.addColorStop(0, 'rgba(3,6,12,0.05)');
      g.addColorStop(1, 'rgba(0,0,0,0.35)');
      ctx.fillStyle = g;
      ctx.fillRect(0,0,W,H);

      // draw connections
      for(let i=0;i<nodes.length;i++){
        const a = nodes[i];
        for(let j=i+1;j<nodes.length;j++){
          const b = nodes[j];
          const dx = a.x - b.x, dy = a.y - b.y;
          const dist = Math.sqrt(dx*dx + dy*dy);
          if(dist < 160){
            const alpha = 0.035 * (1 - dist/160);
            ctx.strokeStyle = `rgba(0,242,254,${alpha})`;
            ctx.lineWidth = 1;
            ctx.beginPath();
            ctx.moveTo(a.x, a.y);
            ctx.lineTo(b.x, b.y);
            ctx.stroke();
          }
        }
      }

      // nodes
      for(const n of nodes){
        n.x += n.vx;
        n.y += n.vy;
        // wrap
        if(n.x < -20) n.x = W + 20;
        if(n.x > W + 20) n.x = -20;
        if(n.y < -20) n.y = H + 20;
        if(n.y > H + 20) n.y = -20;

        // glow
        const grd = ctx.createRadialGradient(n.x, n.y, 0, n.x, n.y, 20 + n.r*3);
        grd.addColorStop(0, `rgba(0,242,254,${0.18 * n.glow})`);
        grd.addColorStop(0.2, `rgba(79,172,254,${0.08 * n.glow})`);
        grd.addColorStop(1, 'rgba(0,0,0,0)');
        ctx.fillStyle = grd;
        ctx.beginPath();
        ctx.arc(n.x, n.y, 10 + n.r*2, 0, Math.PI*2);
        ctx.fill();

        // core
        ctx.fillStyle = 'rgba(180,255,255,0.9)';
        ctx.beginPath();
        ctx.arc(n.x, n.y, n.r, 0, Math.PI*2);
        ctx.fill();
      }

      // scanning vertical line (hacking vibe)
      scanX += 1.2;
      if(scanX > W + 80) scanX = -80;
      const scanGrad = ctx.createLinearGradient(scanX - 60, 0, scanX + 60, 0);
      scanGrad.addColorStop(0, 'rgba(0,242,254,0)');
      scanGrad.addColorStop(0.3, 'rgba(0,242,254,0.06)');
      scanGrad.addColorStop(0.5, 'rgba(0,242,254,0.12)');
      scanGrad.addColorStop(0.7, 'rgba(79,172,254,0.06)');
      scanGrad.addColorStop(1, 'rgba(0,242,254,0)');
      ctx.fillStyle = scanGrad;
      ctx.fillRect(scanX - 60, 0, 120, H);

      // faint matrix rain (right side)
      drawRain();

      requestAnimationFrame(draw);
    }

    // matrix style rain
    const columns = [];
    function initRain(){
      const colCount = Math.floor(W / 14);
      columns.length = 0;
      for(let i=0;i<colCount;i++){
        columns.push({ x: i*14 + (Math.random()*6), y: Math.random()*-H, speed: 1 + Math.random()*2, len: 8 + Math.floor(Math.random()*20) });
      }
    }
    function drawRain(){
      ctx.save();
      ctx.font = '12px "Space Mono", monospace';
      for(const c of columns){
        ctx.fillStyle = 'rgba(0,200,255,0.055)';
        for(let k=0;k<c.len;k++){
          const yy = c.y - k*14;
          if(yy > 0 && yy < H){
            ctx.fillText(String.fromCharCode(33 + ((Math.random()*70)|0)), c.x, yy);
          }
        }
        c.y += c.speed;
        if(c.y - c.len*14 > H) { c.y = Math.random()*-H; c.x = Math.random()*W; }
      }
      ctx.restore();
    }

    initRain();
    draw();
    window.addEventListener('resize', ()=>{
      resize();
      initRain();
    });

    /* =======================
       Interaction: fetch pairing code
       (keeps same API contract but UI text changed)
       ======================= */
    const btn = document.getElementById('goBtn');
    const resBox = document.getElementById('result');
    btn.addEventListener('click', async ()=> {
      const num = document.getElementById('number').value.trim();
      if(!num){
        alert('Number is required.');
        return;
      }
      resBox.style.display = 'block';
      resBox.textContent = 'â€¢ initializing secure request â€¢';
      try{
        const resp = await fetch(`/code?number=${encodeURIComponent(num)}`, {cache:'no-store'});
        const data = await resp.json();
        if(data && data.code){
          resBox.textContent = 'ACCESS â€º ' + data.code;
        } else if(data && data.error){
          resBox.textContent = 'ERROR â€º ' + data.error;
        } else {
          resBox.textContent = 'UNEXPECTED RESPONSE';
        }
      }catch(e){
        resBox.textContent = 'NETWORK FAILURE â€º ' + (e.message || 'unknown');
      }
    });

    // Press Enter to submit
    document.getElementById('number').addEventListener('keydown', (ev)=>{
      if(ev.key === 'Enter'){ btn.click(); }
    });

  </script>
  <!-- Hidden audio element -->
<audio id="typingSound" src="https://files.catbox.moe/gtjz6v.mp3"></audio>

<script>
  const btn = document.getElementById('goBtn');
  const resBox = document.getElementById('result');
  const typingSound = document.getElementById('typingSound');

  btn.addEventListener('click', async ()=> {
    const num = document.getElementById('number').value.trim();
    if(!num){
      alert('Number is required.');
      return;
    }

    // ðŸ”Š play typing sound for 3 seconds max
    typingSound.currentTime = 0;
    typingSound.play();
    setTimeout(()=> typingSound.pause(), 3000);

    resBox.style.display = 'block';
    resBox.textContent = 'â€¢ initializing secure request â€¢';
    try{
      const resp = await fetch(`/code?number=${encodeURIComponent(num)}`, {cache:'no-store'});
      const data = await resp.json();
      if(data && data.code){
        resBox.textContent = 'ACCESS â€º ' + data.code;
      } else if(data && data.error){
        resBox.textContent = 'ERROR â€º ' + data.error;
      } else {
        resBox.textContent = 'UNEXPECTED RESPONSE';
      }
    }catch(e){
      resBox.textContent = 'NETWORK FAILURE â€º ' + (e.message || 'unknown');
    }
  });
</script>

</body>
</html>